
import { Entity } from "./entity.js";

class Planetoid extends Entity {
  constructor(api) {
    super(api);
    this.setPath(new Path2D("m 1.75,0 c 2e-7,0.21581 0.043924,0.32336 -0.027013,0.51449 -0.053389,0.14385 -0.075607,0.33759 -0.2120444,0.40218 -0.2083481,0.0986 -0.2956599,0.26191 -0.3960369,0.40445 -0.2094149,0.29737 -0.8611981,0.32701 -1.0213076,0.21953 -0.1149316,-0.0772 -0.2979381,0.10807 -0.4271814,0.0779 -0.292395,-0.0682 -0.81315332,-0.32493 -0.77321974,-0.40275 0.11842417,-0.23076 -0.13301925,-0.3341 -0.32307231,-0.5604 -0.0843764,-0.10047 -0.11049899,-0.4471 -0.15626883,-0.58424 -0.04368752,-0.13088 -0.10895133,-0.0518 -0.10895125,-0.17038 1.68e-6,-0.33662 0.05901965,-0.70775 0.21988696,-0.97976 0.0902234,-0.15256 0.10499736,0.0485 0.37433967,-0.34056 0.11112138,-0.16052 0.33556788,-0.10475 0.5377087,-0.17485 0.2112233,-0.0732 0.4026496,-0.26871 0.6319535,-0.26871 0.1870001,0 0.3672036,0.0291 0.5363292,0.083 0.1919813,0.0612 0.1299096,0.10478 0.2870801,0.22368 0.1667716,0.12616 0.3968365,0.23102 0.5546543,0.41688 0.1623924,0.19124 0.2046051,0.39106 0.2647888,0.63376 0.030613,0.12346 -0.019524,0.46228 0.038354,0.50576 z"));
    /**@type {p2.Body} */
    this.body = new this.api.p2.Body({
      mass: 100,
      position: [0, 0],
      angularDamping:0,
      damping:0
    });
    this.body.addShape(new this.api.p2.Circle({ radius: 1.65 }));
    this.api.pworld.addBody(this.body);
    this.color = "#" + parseInt(Math.random()*0xffffff).toString(16);
    this.isGravitySource = true;
  }

  /**
   * @param {CanvasRenderingContext2D} ctx 
   */
  render(ctx) {
    ctx.fillStyle = this.color;
    ctx.fill(this.path);
  }
}

export { Planetoid };
